<div class="loader-wrapper">
    <div class="sanger-circle">
        <div class="trace-track">
            <!-- 
        We use an SVG to draw the peaks. 
        A simple repeating pattern of peaks (A, C, G, T colors).
        The track will animate horizontally.
      -->
            <svg class="trace-svg" viewBox="0 0 200 100" preserveAspectRatio="none">

                <!-- Standard Sanger Colors: A=Green(#2ecc71), C=Blue(#3498db), G=Black(#2c3e50), T=Red(#e74c3c) -->

                <!-- Peak 1 (A) -->
                <path d="M 0 100 Q 10 10 20 100" fill="transparent" stroke="#2ecc71" stroke-width="3" />

                <!-- Peak 2 (C) -->
                <path d="M 15 100 Q 25 20 35 100" fill="transparent" stroke="#3498db" stroke-width="3" />

                <!-- Peak 3 (G) -->
                <path d="M 30 100 Q 40 15 50 100" fill="transparent" stroke="#2c3e50" stroke-width="3" />

                <!-- Peak 4 (T) -->
                <path d="M 45 100 Q 55 25 65 100" fill="transparent" stroke="#e74c3c" stroke-width="3" />

                <!-- Peak 5 (A) -->
                <path d="M 60 100 Q 70 10 80 100" fill="transparent" stroke="#2ecc71" stroke-width="3" />

                <!-- Peak 6 (C) -->
                <path d="M 75 100 Q 85 20 95 100" fill="transparent" stroke="#3498db" stroke-width="3" />

                <!-- Peak 7 (G) -->
                <path d="M 90 100 Q 100 15 110 100" fill="transparent" stroke="#2c3e50" stroke-width="3" />

                <!-- Peak 8 (T) -->
                <path d="M 105 100 Q 115 25 125 100" fill="transparent" stroke="#e74c3c" stroke-width="3" />

                <!-- Peak 9 (A) -->
                <path d="M 120 100 Q 130 10 140 100" fill="transparent" stroke="#2ecc71" stroke-width="3" />

                <!-- Peak 10 (C) -->
                <path d="M 135 100 Q 145 20 155 100" fill="transparent" stroke="#3498db" stroke-width="3" />

                <!-- Peak 11 (G) -->
                <path d="M 150 100 Q 160 15 170 100" fill="transparent" stroke="#2c3e50" stroke-width="3" />

                <!-- Peak 12 (T) -->
                <path d="M 165 100 Q 175 25 185 100" fill="transparent" stroke="#e74c3c" stroke-width="3" />

            </svg>
            <!-- Duplicate for seamless loop -->
            <svg class="trace-svg" viewBox="0 0 200 100" preserveAspectRatio="none">

                <path d="M 0 100 Q 10 10 20 100" fill="transparent" stroke="#2ecc71" stroke-width="3" />
                <path d="M 15 100 Q 25 20 35 100" fill="transparent" stroke="#3498db" stroke-width="3" />
                <path d="M 30 100 Q 40 15 50 100" fill="transparent" stroke="#2c3e50" stroke-width="3" />
                <path d="M 45 100 Q 55 25 65 100" fill="transparent" stroke="#e74c3c" stroke-width="3" />

                <path d="M 60 100 Q 70 10 80 100" fill="transparent" stroke="#2ecc71" stroke-width="3" />
                <path d="M 75 100 Q 85 20 95 100" fill="transparent" stroke="#3498db" stroke-width="3" />
                <path d="M 90 100 Q 100 15 110 100" fill="transparent" stroke="#2c3e50" stroke-width="3" />
                <path d="M 105 100 Q 115 25 125 100" fill="transparent" stroke="#e74c3c" stroke-width="3" />

                <path d="M 120 100 Q 130 10 140 100" fill="transparent" stroke="#2ecc71" stroke-width="3" />
                <path d="M 135 100 Q 145 20 155 100" fill="transparent" stroke="#3498db" stroke-width="3" />
                <path d="M 150 100 Q 160 15 170 100" fill="transparent" stroke="#2c3e50" stroke-width="3" />
                <path d="M 165 100 Q 175 25 185 100" fill="transparent" stroke="#e74c3c" stroke-width="3" />
            </svg>
        </div>

        <!-- Optional: A hairline or marker to show "reading" -->
        <div class="reading-line"></div>
    </div>
    <p class="loader-message">{{ message() }}</p>

    @if (progress() !== null) {
    <div class="progress-track">
        <div class="progress-fill" [style.width.%]="progress()"></div>
    </div>
    <p class="progress-text">{{ progress() }}%</p>
    }
</div>